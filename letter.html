<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>A Special Surprise For You ‚ú®</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous">
  <style>
    /* trimmed styles: keep your original layout with minor tweaks */
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma, Geneva, Verdana, sans-serif}
    body{ background:linear-gradient(135deg,#f8e1f4,#e0c3f7,#c2e6ff); background-size:400% 400%; animation:gradientBackground 15s ease infinite; min-height:100vh; overflow-x:hidden; position:relative; }
    .container{ max-width:800px;margin:0 auto;padding:20px; position:relative; z-index:10; animation:fadeIn 3s forwards 0.5s; }
    header{text-align:center;margin-bottom:40px}
    h1{ font-size:2rem;color:#6a4c93;margin-bottom:10px }
    .letter-container{ background:rgba(255,255,255,0.7); border-radius:20px; padding:30px; box-shadow:0 0 20px rgba(106,76,147,0.3); overflow:hidden; }
    .surprise-button{ background:linear-gradient(45deg,#ff9a9e,#fad0c4,#a18cd1); padding:12px 30px; border-radius:50px; border:none; color:white; font-size:1.1rem; cursor:pointer; }
    .modal-overlay{ position:fixed; inset:0; background:rgba(0,0,0,0.6); display:flex; align-items:center; justify-content:center; z-index:1000; opacity:0; visibility:hidden; transition:all .25s; }
    .modal-overlay.active{ opacity:1; visibility:visible }
    .modal{ background:#fff; border-radius:20px; padding:24px; max-width:600px; width:90%; box-shadow:0 0 30px rgba(0,0,0,0.2); position:relative }
    .music-controls{ position:fixed; bottom:20px; right:20px; z-index:200; background:rgba(255,255,255,0.85); border-radius:50%; width:50px;height:50px; display:flex; align-items:center; justify-content:center; cursor:pointer}
    @keyframes fadeIn{ from{ opacity:0; transform:translateY(20px) } to{ opacity:1; transform:translateY(0) } }
    @keyframes gradientBackground{ 0%{ background-position:0% 50% } 50%{ background-position:100% 50% } 100%{ background-position:0% 50% } }
  </style>
</head>
<body>
  <div class="container" role="main">
    <header><h1>For My Dearest Friend ‚ù§Ô∏è</h1></header>

    <div class="letter-container">
      <div class="letter" id="typed-text" aria-live="polite"></div>
    </div>

    <div style="text-align:center; margin-top:18px">
      <button class="surprise-button" id="surprise-button" aria-haspopup="dialog">Click for a Surprise! üéÅ</button>
    </div>

    <div style="margin-top:20px;">
      <a href="javascript:history.back()" class="back-button" style="display:inline-block;padding:10px 20px;margin-top:20px;background:#fff;border-radius:30px;border:2px solid #6a4c93;color:#6a4c93;text-decoration:none">‚Üê Back to Birthday Cake</a>
    </div>
  </div>

  <div class="modal-overlay" id="modal-overlay" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal" role="document">
      <button id="modal-close" aria-label="Close" style="position:absolute;right:12px;top:12px;border:none;background:none;font-size:1.4rem;color:#6a4c93;cursor:pointer">√ó</button>
      <h2 style="color:#6a4c93">üéâ Your Special Surprise! üéâ</h2>
      <div style="margin-top:12px">
        <div class="playlist" aria-label="Playlist">
          <!-- Items -->
          <div class="playlist-item" style="display:flex;gap:12px;align-items:center;padding:10px;border-radius:10px;background:rgba(240,240,255,0.7);margin-bottom:10px">
            <img src="3.jpg" alt="" style="width:40px;height:40px;border-radius:50%;object-fit:cover">
            <div style="flex:1;text-align:left">
              <div style="font-weight:bold;color:#6a4c93">Our Favorite Memory</div>
              <div style="font-size:.9rem;color:#888">That Artist You Love</div>
            </div>
            <button class="playlist-item-play" aria-label="Play Song"><i class="fas fa-play"></i></button>
          </div>
          <!-- more items omitted for brevity; keep your list -->
        </div>

        <div style="margin-top:18px; text-align:center">
          <a href="#" download class="back-button" style="background:#ffb6c1;border-color:#ffb6c1;color:white;padding:10px 18px;border-radius:30px;display:inline-block"><i class="fas fa-download"></i> Download Your Digital Gift</a>
        </div>
      </div>
    </div>
  </div>

  <div class="music-controls" id="music-toggle" aria-pressed="false" title="Toggle background music">
    <i class="fas fa-volume-mute" id="music-icon" style="color:#6a4c93;font-size:20px"></i>
  </div>

  <audio id="background-music" loop preload="auto">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c8c8a73467.mp3?filename=relaxing-145038.mp3" type="audio/mpeg">
  </audio>
  <audio id="click-sound" preload="auto">
    <source src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_bb630cc098.mp3?filename=cute-notification-ringtone-1-173850.mp3" type="audio/mpeg">
  </audio>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.12/typed.min.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/canvas-confetti/1.5.1/confetti.browser.min.js" crossorigin="anonymous"></script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const letterContent = `My dearest friend,

As I sit here thinking about all our memories together, I can't help but smile. From our late-night talks to our spontaneous adventures, you've filled my life with so much joy and laughter. You've been my shoulder to cry on, my partner in crime, and my biggest supporter.

On your special day, I want you to know how grateful I am to have you in my life. You make every day brighter just by being you - kind, funny, and incredibly thoughtful.

Happy Birthday to my favorite person in the world! Here's to many more years of friendship, laughter, and creating memories together.

With all my love,
[Your Name]`;

      new Typed('#typed-text', {
        strings: [letterContent],
        typeSpeed: 30,
        showCursor: true,
        cursorChar: '|'
      });

      // floating elements (light)
      const elements = [
        {emoji:'üß∏', size:'26px'}, {emoji:'‚ú®', size:'20px'}, {emoji:'‚ù§Ô∏è', size:'26px'}, {emoji:'‚òÖ', size:'18px'}
      ];
      elements.forEach((el, idx)=> {
        const node = document.createElement('div');
        node.style.position='absolute';
        node.style.left = (10 + idx*15) + 'vw';
        node.style.top = (10 + idx*6) + 'vh';
        node.style.fontSize = el.size;
        node.style.opacity = .9;
        node.textContent = el.emoji;
        document.body.appendChild(node);
      });

      // modal behavior
      const surpriseBtn = document.getElementById('surprise-button');
      const modalOverlay = document.getElementById('modal-overlay');
      const modalClose = document.getElementById('modal-close');
      const clickSound = document.getElementById('click-sound');
      surpriseBtn.addEventListener('click', () => {
        clickSound.play().catch(()=>{});
        modalOverlay.classList.add('active');
        modalOverlay.setAttribute('aria-hidden','false');
        confetti({ particleCount:120, spread:80, origin:{ y:0.6 }});
      });
      modalClose.addEventListener('click', closeModal);
      modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) closeModal(); });
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });

      function closeModal(){
        modalOverlay.classList.remove('active');
        modalOverlay.setAttribute('aria-hidden','true');
      }

      // music toggle
      const musicToggle = document.getElementById('music-toggle');
      const musicIcon = document.getElementById('music-icon');
      const bgMusic = document.getElementById('background-music');
      let playing = false;
      musicToggle.addEventListener('click', () => {
        if (playing) { bgMusic.pause(); musicIcon.classList.remove('fa-volume-up'); musicIcon.classList.add('fa-volume-mute'); musicToggle.setAttribute('aria-pressed','false'); }
        else { bgMusic.play().catch(()=>{}); musicIcon.classList.remove('fa-volume-mute'); musicIcon.classList.add('fa-volume-up'); musicToggle.setAttribute('aria-pressed','true'); }
        playing = !playing;
      });
    });
  </script>
</body>
</html>
