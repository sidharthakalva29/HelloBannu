<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Memory Lane - Birthday Memories</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <style>
      /* --- Layout & theme --- */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #ffcee6 0%, #ffd6f1 50%, #e4f9ff 100%);
        min-height: 100vh;
        overflow-x: hidden;
        position: relative;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      .scrapbook-bg {
        position: fixed;
        inset: 0;
        background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ff9eda' fill-opacity='0.12' fill-rule='evenodd'/%3E%3C/svg%3E");
        opacity: 0.7;
        z-index: -1;
        pointer-events: none;
      }

      .memory-lane-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
        position: relative;
        z-index: 2;
      }

      .header {
        text-align: center;
        margin-bottom: 2.5rem;
      }

      .header h1 {
        font-size: 3rem;
        color: #ff4e91;
        margin-bottom: 1rem;
        font-family: "Pacifico", cursive;
        text-shadow: 3px 3px 0 rgba(255, 165, 213, 0.45);
      }

      .header p {
        font-size: 1.05rem;
        color: #8858a3;
        max-width: 700px;
        margin: 0 auto;
        line-height: 1.6;
        background: rgba(255, 255, 255, 0.6);
        padding: 0.75rem 1rem;
        border-radius: 14px;
      }

      /* Controls */
      .slideshow-controls {
        display: flex;
        justify-content: center;
        margin-bottom: 1.25rem;
        gap: 0.6rem;
      }

      .btn {
        padding: 0.7rem 1.25rem;
        margin: 0 0.4rem;
        background: linear-gradient(45deg, #ff6ec4, #7873f5);
        color: white;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        font-size: 0.95rem;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        box-shadow: 0 6px 18px rgba(255, 110, 196, 0.35);
      }

      .btn[aria-pressed="true"] {
        transform: translateY(-2px) scale(1.03);
      }

      .gallery-container {
        position: relative;
        margin: 1.5rem 0;
      }

      .gallery {
        display: flex;
        gap: 1.25rem;
        padding: 1.25rem 0;
        overflow-x: auto;
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
      }

      .gallery::-webkit-scrollbar {
        height: 8px;
      }

      .gallery::-webkit-scrollbar-track {
        background: #ffcee6;
        border-radius: 10px;
      }

      .gallery::-webkit-scrollbar-thumb {
        background: #ff6ec4;
        border-radius: 10px;
      }

      .memory-card {
        flex: 0 0 auto;
        width: 300px;
        height: 400px;
        position: relative;
        border-radius: 16px;
        overflow: hidden;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
        transform: translateY(30px) rotate(var(--rotate, 0deg));
        opacity: 0;
        background: white;
        border: 6px solid #fff;
        transition: transform 0.5s cubic-bezier(0.2, 0.9, 0.3, 1), opacity 0.6s;
      }

      .memory-card.visible {
        transform: translateY(0) rotate(var(--rotate, 0deg));
        opacity: 1;
      }

      .memory-img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        transition: transform 0.5s ease;
      }

      .memory-card:hover .memory-img {
        transform: scale(1.06);
      }

      .memory-caption {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        background: rgba(255, 105, 180, 0.92);
        color: #fff;
        padding: 0.9rem;
        transform: translateY(100%);
        transition: transform 0.35s ease;
        font-size: 0.98rem;
      }

      .memory-card:hover .memory-caption {
        transform: translateY(0);
      }

      .card-tape {
        position: absolute;
        width: 88px;
        height: 30px;
        background: rgba(255, 255, 255, 0.85);
        top: -12px;
        left: 50%;
        transform: translateX(-50%) rotate(var(--rot, 2deg));
        z-index: 2;
        border-radius: 6px;
        box-shadow: 0 5px 12px rgba(0, 0, 0, 0.06);
      }

      .card-sticker {
        position: absolute;
        width: 44px;
        height: 44px;
        bottom: 10px;
        right: 10px;
        z-index: 3;
      }

      .navigation-buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 2rem;
      }

      #nextButton {
        background: linear-gradient(45deg, #ff4e91, #ff9a8b);
        font-size: 1rem;
        padding: 0.85rem 1.6rem;
        border-radius: 24px;
        position: relative;
        overflow: hidden;
        color: white;
      }

      #backButton {
        background: linear-gradient(45deg, #a485ff, #75c6ff);
        font-size: 1rem;
        padding: 0.85rem 1.6rem;
        border-radius: 24px;
        color: white;
      }

      /* stickers & balloons - decorative */
      .sticker {
        position: absolute;
        width: 60px;
        height: 60px;
        z-index: 1;
        pointer-events: none;
      }

      .balloon {
        position: fixed;
        width: 60px;
        height: 70px;
        background: radial-gradient(circle at 30% 30%, #ff7eb9, #ff1493);
        border-radius: 50%;
        box-shadow: inset -5px -5px 0 rgba(0, 0, 0, 0.06);
        animation: floatUp 18s linear infinite;
        z-index: 0;
        opacity: 0.95;
      }

      @keyframes floatUp {
        0% {
          transform: translateY(100vh) rotate(0deg);
          opacity: 1;
        }
        100% {
          transform: translateY(-100vh) rotate(360deg);
          opacity: 0;
        }
      }

      /* responsive */
      @media (max-width: 900px) {
        .header h1 {
          font-size: 2.3rem;
        }
        .memory-card {
          width: 260px;
          height: 340px;
        }
      }

      @media (max-width: 480px) {
        .header h1 {
          font-size: 1.9rem;
        }
        .header p {
          font-size: 0.98rem;
        }
        .navigation-buttons {
          flex-direction: column;
          gap: 0.9rem;
        }
        .btn {
          width: 100%;
          max-width: 220px;
        }
      }
    </style>
  </head>

  <body>
    <div class="scrapbook-bg" aria-hidden="true"></div>

    <!-- decorative/confetti placeholder; content generated by JS -->
    <div id="confetti-container" aria-hidden="true"></div>

    <!-- Balloons -->
    <div class="balloon" style="left:10%; animation-duration:18s;"></div>
    <div class="balloon" style="left:25%; animation-duration:16s; animation-delay:2s"></div>
    <div class="balloon" style="left:70%; animation-duration:20s; animation-delay:5s"></div>
    <div class="balloon" style="left:85%; animation-duration:17s; animation-delay:1s"></div>

    <div class="memory-lane-container" role="main">
      <div class="header" role="banner">
        <h1>Our Memory Lane</h1>
        <p>
          A journey through the most incredible moments we've shared together.
          Hover (or tap) each photo to see why these memories mean so much to
          me! ‚ú®üíñ
        </p>
      </div>

      <div class="slideshow-controls" aria-hidden="false">
        <button id="startSlideshow" class="btn" aria-pressed="false" title="Start slideshow">
          ‚ñ∂ Start Slideshow
        </button>
        <button id="pauseSlideshow" class="btn" style="display:none" aria-pressed="true" title="Pause slideshow">
          ‚è∏ Pause Slideshow
        </button>
      </div>

      <div class="gallery-container">
        <div class="gallery" id="memoryGallery" aria-live="polite"></div>
      </div>

      <div class="navigation-buttons" role="navigation" aria-label="Page navigation">
        <button id="backButton" class="btn">‚Üê Back to Welcome</button>
        <button id="nextButton" class="btn">‚ú® Next Surprise! ‚ú®</button>
      </div>
    </div>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/ScrollTrigger.min.js"></script>

    <script>
      // --- Data: replace image filenames with your actual image files if needed ---
      const memories = [
        { image: "1.jpg", caption: "Remember when we got lost hiking and found that amazing waterfall? Best wrong turn ever! üòÇ", rotationAngle: -2, emoji: "üåä" },
        { image: "2.jpeg", caption: "That time we stayed up all night just talking and watching the sunrise. I've never laughed so hard in my life!", rotationAngle: 3, emoji: "üåÖ" },
        { image: "3.jpg", caption: "Our first road trip together! You fell asleep and I drew a tiny mustache on you with a marker. You didn't notice for HOURS!", rotationAngle: -1, emoji: "üöó" },
        { image: "4.jpg", caption: "Remember our cooking disaster when we tried that fancy recipe? The smoke alarm going off, but the pizza after was the best!", rotationAngle: 2, emoji: "üçï" },
        { image: "5.jpg", caption: "Our camping trip under the stars. You were terrified of that tiny spider and jumped so high! Still my favorite memory.", rotationAngle: -3, emoji: "üèïÔ∏è" },
        { image: "7.jpg", caption: "That concert where we danced until our feet hurt. Worth every blister!", rotationAngle: 1, emoji: "üéµ" },
        { image: "8.jpg", caption: "When we built that epic blanket fort during the storm and watched movies all day. Best rainy day ever!", rotationAngle: -2, emoji: "üè∞" },
        { image: "1.jpg", caption: "Our spontaneous beach day when we skipped class. I still find sand in my backpack sometimes!", rotationAngle: 2, emoji: "üèñÔ∏è" },
        { image: "2.jpeg", caption: "You've always been there for me through thick and thin. I'm so grateful for your friendship. ‚ù§Ô∏è", rotationAngle: -1, emoji: "üíï" },
        { image: "3.jpg", caption: "Happy Birthday to my best friend in the whole world! Here's to many more adventures together!", rotationAngle: 3, emoji: "üéÇ" }
      ];

      // Basic confetti generator (lightweight)
      function createConfetti() {
        const container = document.getElementById("confetti-container");
        const colors = ["#ff6ec4", "#a485ff", "#ff4e91", "#c175ff", "#75c6ff"];
        // keep number modest for performance
        const COUNT = 40;

        for (let i = 0; i < COUNT; i++) {
          const el = document.createElement("div");
          el.className = "confetti-piece";
          el.style.position = "fixed";
          el.style.left = Math.random() * 100 + "vw";
          el.style.top = -20 - Math.random() * 30 + "px";
          el.style.width = Math.random() * 12 + 6 + "px";
          el.style.height = Math.random() * 12 + 6 + "px";
          el.style.background = colors[Math.floor(Math.random() * colors.length)];
          el.style.borderRadius = Math.random() > 0.5 ? "50%" : "0";
          el.style.opacity = 0.8 * Math.random();
          el.style.transform = `rotate(${Math.random() * 360}deg)`;
          el.style.pointerEvents = "none";
          el.style.zIndex = "0";

          // animate with GSAP for smoother performance
          document.body.appendChild(el);
          gsap.to(el, {
            y: window.innerHeight + 120,
            rotation: Math.random() * 600,
            duration: 4 + Math.random() * 4,
            delay: Math.random() * 3,
            ease: "power1.out",
            onComplete: () => el.remove()
          });
        }

        // periodically add more confetti while page is open (gentle)
        setTimeout(() => {
          if (document.visibilityState === "visible") createConfetti();
        }, 5000 + Math.random() * 8000);
      }

      document.addEventListener("DOMContentLoaded", () => {
        createConfetti();

        const galleryElement = document.getElementById("memoryGallery");
        const startBtn = document.getElementById("startSlideshow");
        const pauseBtn = document.getElementById("pauseSlideshow");
        const backButton = document.getElementById("backButton");
        const nextButton = document.getElementById("nextButton");

        // Generate memory cards (only here, not duplicated in HTML)
        memories.forEach((m, i) => {
          const card = document.createElement("div");
          card.className = "memory-card";
          card.style.setProperty("--rotate", `${m.rotationAngle}deg`);
          card.setAttribute("role", "group");
          card.setAttribute("aria-label", `Memory ${i + 1}`);

          const tape = document.createElement("div");
          tape.className = "card-tape";
          tape.style.setProperty("--rot", `${m.rotationAngle * 1.7}deg`);

          const img = document.createElement("img");
          img.className = "memory-img";
          img.src = m.image;
          img.alt = m.caption || `Memory ${i + 1}`;

          const caption = document.createElement("div");
          caption.className = "memory-caption";
          caption.textContent = m.caption;

          const sticker = document.createElement("div");
          sticker.className = "card-sticker";
          sticker.innerHTML = `<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="50" fill="#ff6ec4"/><text x="50" y="65" font-family="Arial" font-size="40" text-anchor="middle" fill="white">${m.emoji}</text></svg>`;

          card.appendChild(tape);
          card.appendChild(img);
          card.appendChild(caption);
          card.appendChild(sticker);

          galleryElement.appendChild(card);
        });

        // Show slideshow controls
        document.querySelector(".slideshow-controls").style.opacity = "1";

        // Intersection Observer for reveal effect
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("visible");
                observer.unobserve(entry.target);
              }
            });
          },
          { threshold: 0.25 }
        );

        document.querySelectorAll(".memory-card").forEach((card, idx) => {
          observer.observe(card);
          // staggered initial reveal
          card.style.transitionDelay = `${0.08 * idx}s`;
        });

        // slideshow logic
        let slideshowInterval = null;
        let currentIndex = 0;
        const cards = Array.from(galleryElement.querySelectorAll(".memory-card"));

        function showCardCentered(index) {
          if (!cards[index]) return;
          const card = cards[index];
          const galleryRect = galleryElement.getBoundingClientRect();
          galleryElement.scrollTo({
            left: card.offsetLeft - (galleryRect.width / 2) + card.offsetWidth / 2,
            behavior: "smooth"
          });
        }

        // Start slideshow (3 seconds per slide)
        function startSlideshow() {
          startBtn.style.display = "none";
          pauseBtn.style.display = "inline-flex";
          startBtn.setAttribute("aria-pressed", "true");
          pauseBtn.setAttribute("aria-pressed", "false");

          if (slideshowInterval) clearInterval(slideshowInterval);
          slideshowInterval = setInterval(() => {
            currentIndex = (currentIndex + 1) % cards.length;
            showCardCentered(currentIndex);
          }, 3000); // 3000 ms (3 seconds) per slide
        }

        function pauseSlideshow() {
          pauseBtn.style.display = "none";
          startBtn.style.display = "inline-flex";
          startBtn.setAttribute("aria-pressed", "false");
          pauseBtn.setAttribute("aria-pressed", "true");

          if (slideshowInterval) {
            clearInterval(slideshowInterval);
            slideshowInterval = null;
          }
        }

        startBtn.addEventListener("click", startSlideshow);
        pauseBtn.addEventListener("click", pauseSlideshow);

        // Back / Next navigation
        backButton.addEventListener("click", () => {
          window.location.href = "index.html";
        });

        nextButton.addEventListener("click", () => {
          window.location.href = "cake.html";
        });

        // small hover/tap animations with GSAP
        gsap.from(".header", { duration: 0.9, y: -30, opacity: 0, ease: "back.out(1.3)" });
        gsap.from(".navigation-buttons", { duration: 0.9, y: 30, opacity: 0, delay: 0.3, ease: "power3.out" });

        gsap.utils.toArray(".memory-card").forEach((card) => {
          card.addEventListener("mouseenter", () => {
            gsap.to(card, { scale: 1.04, boxShadow: "0 18px 36px rgba(0,0,0,0.12)", duration: 0.28 });
          });
          card.addEventListener("mouseleave", () => {
            gsap.to(card, { scale: 1, boxShadow: "0 10px 25px rgba(0,0,0,0.08)", duration: 0.28 });
          });
        });

        // Auto-scroll into view after a moment
        setTimeout(() => {
          const galleryContainer = document.querySelector(".gallery-container");
          galleryContainer.scrollIntoView({ behavior: "smooth", block: "center" });
        }, 1400);

        // Keyboard controls: space to start/pause slideshow, arrows to move
        document.addEventListener("keydown", (e) => {
          if (e.code === "Space") {
            // toggle
            if (slideshowInterval) pauseSlideshow();
            else startSlideshow();
            e.preventDefault();
          } else if (e.code === "ArrowRight") {
            currentIndex = (currentIndex + 1) % cards.length;
            showCardCentered(currentIndex);
          } else if (e.code === "ArrowLeft") {
            currentIndex = (currentIndex - 1 + cards.length) % cards.length;
            showCardCentered(currentIndex);
          }
        });
      });
    </script>
  </body>
</html>
